<div class="seat-selection-layout">
  <!-- Left Side - Canvas Area -->
  <main class="canvas-area">
    <div class="canvas-wrapper">
      <canvas #canvas></canvas>
      
      <!-- Instructions Tooltip -->
      <div class="instructions-tooltip">
        <div class="tooltip-content">
          <p><strong>How to use:</strong></p>
          <ul>
            <li><strong>Select seats:</strong> Click on available seats</li>
            <li><strong>Zoom:</strong> Use scroll wheel</li>
            <li><strong>Pan:</strong> Middle click + drag or Alt + drag</li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <!-- Right Sidebar - Controls & Information -->
  <aside class="controls-sidebar">
    <!-- Compact Event Header -->
    <div class="compact-header">
      <div class="header-top">
        <button class="back-button" routerLink="/events">
          ‚Üê Back
        </button>
      </div>
      
      <div class="event-info-ultra-compact">
        <h1>{{ event.title }}</h1>
        <div class="event-details-minimal">
          <span class="detail-item">
            <i class="icon-calendar"></i>
            {{ formatDate(event.date) }}
          </span>
          <span class="detail-item">
            <i class="icon-time"></i>
            {{ event.time }}
          </span>
          <span class="detail-item">
            <i class="icon-location"></i>
            {{ event.venue }}
          </span>
        </div>
      </div>
    </div>

    <!-- Selected Seats Summary (Top Section) -->
    <div class="selected-summary" *ngIf="selectedSeats.length > 0">
      <div class="summary-header">
        <h3>Selected Seats ({{ selectedSeats.length }})</h3>
        <button class="clear-btn" (click)="clearSelection()">Clear All</button>
      </div>
      
      <div class="seats-grid">
        <div class="seat-tag" *ngFor="let seat of selectedSeats; let i = index">
    <span class="seat-label">{{ seat.row }}S{{ seat.number }}</span>
          <span class="seat-tier" [style.color]="seat.tier.color">{{ seat.tier.name.charAt(0) }}</span>
          <button class="remove-tag" (click)="removeSeat(seat)" title="Remove">√ó</button>
        </div>
      </div>
      
      <div class="quick-summary">
        <div class="price-breakdown">
          <div class="price-item" *ngFor="let item of getSelectedSeatsByTier()">
            <span>{{ item.tier.name }} √ó{{ item.count }}</span>
            <span>{{ formatPrice(item.total) }}</span>
          </div>
        </div>
        <div class="total-price">
          <span>Total:</span>
          <span class="amount">{{ formatPrice(getTotalPrice()) }}</span>
        </div>
      </div>
      
      <div class="action-buttons-compact">
        <button class="btn-add-compact" (click)="addToCart()">
          Add {{ selectedSeats.length }} to Cart
        </button>
        <button class="btn-view-cart-compact" [routerLink]="['/cart']">
          View Cart
        </button>
      </div>
    </div>

    <!-- Empty Selection State -->
    <div class="empty-state-compact" *ngIf="selectedSeats.length === 0">
      <div class="empty-icon">üëÜ</div>
      <p>Click on seats to select them</p>
      <p class="hint">Available seats are shown in blue, purple, or pink</p>
    </div>

    <!-- Compact Legend -->
    <div class="compact-legend">
      <h4>Seat Types</h4>
      <div class="legend-items-compact">
        <div class="legend-item-compact" *ngFor="let item of legendItems">
          <div class="legend-color-compact" 
               [style.background-color]="item.color"
               [style.border]="item.border ? '1px solid ' + item.border : 'none'">
            <div *ngIf="item.label === 'PARTIAL VIEW'" class="partial-view-compact">
              <div class="half-left" [style.background-color]="colors.VIP"></div>
              <div class="half-right" [style.background-color]="colors.NOT_AVAILABLE"></div>
            </div>
          </div>
          <span class="legend-label-compact">{{ item.label }}</span>
          <span class="legend-price-compact" *ngIf="item.price">{{ item.price }}</span>
        </div>
      </div>
    </div>

    <!-- Zoom Controls -->
    <div class="zoom-controls-compact">
      <h4>Controls</h4>
      <div class="zoom-buttons-compact">
        <button (click)="zoomIn()" title="Zoom In">
          <span class="zoom-icon">+</span>
          <span>Zoom In</span>
        </button>
        <button (click)="zoomOut()" title="Zoom Out">
          <span class="zoom-icon">‚àí</span>
          <span>Zoom Out</span>
        </button>
        <button (click)="resetView()" title="Reset View">
          <span class="zoom-icon">‚Ü∫</span>
          <span>Reset</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- Mobile Bottom Bar -->
  <div class="mobile-bottom-bar" *ngIf="selectedSeats.length > 0">
    <div class="mobile-summary">
      <div class="mobile-seats-info">
        <span class="mobile-icon">üé´</span>
        <span class="mobile-count">{{ selectedSeats.length }} seat{{ selectedSeats.length > 1 ? 's' : '' }}</span>
        <span class="mobile-price">{{ formatPrice(getTotalPrice()) }}</span>
      </div>
      <div class="mobile-actions">
        <button class="mobile-clear" (click)="clearSelection()">Clear</button>
        <button class="mobile-add" (click)="addToCart()">Add to Cart</button>
      </div>
    </div>
  </div>
</div>