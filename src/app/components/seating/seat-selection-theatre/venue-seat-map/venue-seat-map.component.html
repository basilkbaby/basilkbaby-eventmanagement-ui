<div class="seat-map" *ngIf="selectedSection">
  <!-- Header -->
  <div class="map-header">
    <div class="header-content">
      <div class="section-info">
        <h2>{{ selectedSection.name }} Section</h2>
        <div class="section-details">
          <span class="price-badge">{{ formatPrice(selectedSection.price) }}</span>
          <span class="seats-info">{{ selectedSeats.length }} of 8 selected</span>
        </div>
      </div>
      
      <div class="header-actions">
        <button class="clear-btn" 
                (click)="clearSelection()" 
                [disabled]="selectedSeats.length === 0">
          Clear All
        </button>
      </div>
    </div>
    
    <p class="section-description">{{ selectedSection.description }}</p>
  </div>

  <!-- Main Content -->
  <div class="map-content">
    <!-- Interactive Seat Map -->
    <div class="seat-map-container">
      <div class="map-controls">
        <div class="zoom-controls">
          <button class="zoom-btn" (click)="zoomOut()" [disabled]="zoom <= 0.5">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M5 12h14" stroke="currentColor" stroke-width="2"/>
            </svg>
          </button>
          <span class="zoom-level">{{ (zoom * 100).toFixed(0) }}%</span>
          <button class="zoom-btn" (click)="zoomIn()" [disabled]="zoom >= 2">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
            </svg>
          </button>
          <button class="reset-btn" (click)="resetZoom()">Reset</button>
        </div>
        
        <div class="legend">
          <div class="legend-item" *ngFor="let item of legendItems">
            <div class="legend-color" [style.background-color]="item.color"></div>
            <span>{{ item.label }}</span>
          </div>
        </div>
      </div>

      <!-- SVG Seat Map -->
      <div class="svg-wrapper">
        <svg #svgContainer width="800" height="600" viewBox="0 0 800 600" 
             [style.transform]="'scale(' + zoom + ')'"
             [style.transformOrigin]="'center'">
          
          <!-- Stage -->
          <defs>
            <linearGradient id="stageGradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#1a1a1a"/>
              <stop offset="100%" stop-color="#000000"/>
            </linearGradient>
          </defs>
          
          <rect x="200" y="50" width="400" height="80" rx="5" fill="url(#stageGradient)" stroke="#333" stroke-width="3"/>
          <text x="400" y="95" text-anchor="middle" fill="white" font-size="28" font-weight="bold" font-family="Arial">
            STAGE
          </text>
          
          <!-- Row Labels -->
          <g *ngFor="let row of ['A','B','C','D','E','F','G','H','I','J']">
            <text x="180" [attr.y]="200 + (row.charCodeAt(0) - 65) * 30" text-anchor="end" fill="#64748B" 
                  font-size="12" font-weight="bold">{{ row }}</text>
            <text x="620" [attr.y]="200 + (row.charCodeAt(0) - 65) * 30" text-anchor="start" fill="#64748B" 
                  font-size="12" font-weight="bold">{{ row }}</text>
          </g>
          
          <!-- Seats -->
          <g *ngFor="let seat of seats">
            <circle 
              [attr.cx]="seat.cx" 
              [attr.cy]="seat.cy" 
              r="10"
              [attr.fill]="getSeatColor(seat)"
              [attr.stroke]="getSeatStrokeColor(seat)"
              [attr.stroke-width]="getSeatStrokeWidth(seat)"
              (click)="toggleSeat(seat)"
              [class.available]="seat.isAvailable"
              [class.selected]="seat.isSelected"
              [class.unavailable]="!seat.isAvailable"
              style="cursor: pointer; transition: all 0.2s;">
              <title>
                Row {{ seat.row }} Seat {{ seat.number }}
                {{ seat.isAvailable ? 'Available' : 'Unavailable' }}
                {{ seat.type === 'wheelchair' ? '(Wheelchair Accessible)' : '' }}
                {{ seat.type === 'premium' ? '(Premium)' : '' }}
              </title>
            </circle>
            
            <text *ngIf="seat.isSelected"
                  [attr.x]="seat.cx" 
                  [attr.y]="seat.cy + 4" 
                  text-anchor="middle" 
                  fill="white" 
                  font-size="9" 
                  font-weight="bold">
              {{ seat.number }}
            </text>
          </g>
          
          <!-- Section Label -->
          <rect x="300" y="130" width="200" height="30" rx="15" fill="rgba(255,255,255,0.9)" 
                stroke="rgba(0,0,0,0.1)" stroke-width="1"/>
          <text x="400" y="150" text-anchor="middle" fill="#1E293B" font-size="16" font-weight="bold">
            {{ selectedSection.name }} SECTION
          </text>
        </svg>
      </div>
    </div>

    <!-- Selection Sidebar -->
    <div class="selection-sidebar">
      <div class="selection-summary">
        <h3>Selected Seats</h3>
        
        <div class="selected-list" *ngIf="selectedSeats.length > 0; else emptyState">
          <div class="selected-item" *ngFor="let seat of selectedSeats">
            <div class="seat-info">
              <span class="seat-location">Row {{ seat.row }} • Seat {{ seat.number }}</span>
              <span class="seat-type">{{ seat.type | titlecase }}</span>
            </div>
            <span class="seat-price">{{ formatPrice(selectedSection.price) }}</span>
          </div>
          
          <div class="selection-total">
            <div class="total-label">
              <span>Total:</span>
              <span class="seat-count">{{ selectedSeats.length }} seat(s)</span>
            </div>
            <div class="total-price">{{ formatPrice(totalPrice) }}</div>
          </div>
          
          <button class="add-to-cart-btn">
            Add to Cart
          </button>
        </div>
        
        <ng-template #emptyState>
          <div class="empty-state">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
              <path d="M4 19.5v-15A2.5 2.5 0 016.5 2H20v20H6.5a2.5 2.5 0 010-5H20" stroke="#CBD5E1" stroke-width="2"/>
            </svg>
            <p>No seats selected</p>
            <p class="hint">Click on available seats to select them</p>
          </div>
        </ng-template>
      </div>
      
      <div class="section-benefits">
        <h4>Section Benefits</h4>
        <div class="benefits-list">
          <div class="benefit-item" *ngFor="let benefit of selectedSection.benefits">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M9 12l2 2 4-4" stroke="#10B981" stroke-width="2"/>
            </svg>
            {{ benefit }}
          </div>
        </div>
      </div>
      
      <div class="selection-tips">
        <h4>Tips</h4>
        <ul>
          <li>• Click on seats to select/deselect</li>
          <li>• Maximum 8 seats per transaction</li>
          <li>• Selected seats turn blue</li>
          <li>• Use zoom controls for better view</li>
          <li>• Wheelchair seats are marked in orange</li>
        </ul>
      </div>
    </div>
  </div>
</div>